# CSS 中的 BFC
- [CSS 中的 BFC](#css-中的-bfc)
  - [一、什么是 BFC](#一什么是-bfc)
    - [1.1 成为BFC的条件](#11-成为bfc的条件)
    - [1.2 BFC 的特性](#12-bfc-的特性)
  - [二、BFC 应用](#二bfc-应用)
    - [2.1 解决 Margin collapsing](#21-解决-margin-collapsing)
    - [2.2 清除浮动](#22-清除浮动)
    - [2.3 实现两栏布局](#23-实现两栏布局)
## 一、什么是 BFC
`BFC (Block Formatting Context)` 即 块格式化上下文，是 `CSS` 中基于 `box` 的一个布局对象，它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。明确地，它是一个独立的盒子，并且这个独立的盒子内部布局不受外界影响，当然，`BFC` 也不会影响到外面的元素

- 一个元素属于最近的 `父级BFC`， 不能同时存在于两个 `BFC` 中
- `浮动定位` 和 `清除浮动` 时只会应用于 `同一 BFC` 内的元素
  - `浮动定位` 不会影响 `其它 BFC` 中元素的布局
  - `清除浮动` 只能清除 `同一BFC` 中在它 `前面` 的元素的浮动
- 外边距折叠（Margin collapsing）也只会发生在属于 `同一 BFC` 的块级元素之间

### 1.1 成为BFC的条件
至少满足下列条件中的任何一个：
- 根元素
- float: left || right
- position: absolute || fixed
- display: table-cell || table-caption || inline-block || flex || inline-flex
- overflow: hidden || auto || scroll

### 1.2 BFC 的特性
`BFC` 的特性可以总结为以下几点：

1. BFC 内部，盒子由上至下按顺序进行排列，其间隙由盒子的外边距决定，并且，当同一个 BFC 中的两个盒子同时具有相对方向的外边距时，其外边距还会发生 `外边距折叠`（Margin collapsing）
1. BFC 内部，无论是浮动盒子还是普通盒子，其左总是与包含块的左边相接触
1. BFC 区域不会与 `float box` 区域相叠加
1. BFC 内外布局不会相互影响
1. 计算 BFC 高度的时候，浮动元素的高度也计算在内

## 二、BFC 应用
### 2.1 解决 Margin collapsing
**Margin collapsing:**  
> 当 `同一个 BFC` 中的两个盒子同时具有 `相对方向` 的外边距时，外边距会发生叠加，当兄弟盒子的外边距不一样时，将以 `最大` 的那个外边距为准


**解决方案：**  
如果他们属于 `不同的BFC`，他们之间的外边距将不会折叠。我们给其中的一个盒子外部包裹一层父盒子，并成为一个 `新的BFC`
### 2.2 清除浮动
**什么是清除浮动？**  
> 当容器的高度为 `auto`，且容器的内容中有 `浮动元素`，在这种情况下，容器的高度不能自动伸长以适应内容的高度，使得内容溢出到容器外面而影响布局的现象叫浮动溢出，为了防止这个现象的出现而进行的CSS处理，就叫 `清除浮动`

**解决方案：**  

**方法一：BFC**  
可以使容器成为 `BFC` 来解决问题，根据是：计算 `BFC` 高度的时候，浮动元素的高度也计算在内

**方法二：clear属性**  
`clear` 属性指定一个元素是否必须移动（清除浮动后）到在它之前的浮动元素下面
```css
clear：none | left | right | both | inline-start | inline-end
```
按照定义，写入了 `clear: both` 的元素不再允许周围有浮动的元素产生

### 2.3 实现两栏布局
传统的 `左菜单` `右内容` 的两栏布局，我们经常会选择左栏浮动，右边设置 `padding` 或者 `margin` 的思路来实现这一做法  

利用 `BFC` 也可以创建两栏布局，根据是：`BFC` 区域不会与 `float box` 区域相叠加